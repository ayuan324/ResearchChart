# ResearchChart - AI ç§‘ç ”å›¾è¡¨ç”Ÿæˆå¹³å°

åŸºäº Next.js å’Œä¸‰é˜¶æ®µ Agent æ¡†æ¶çš„æ™ºèƒ½ç§‘ç ”å›¾è¡¨ç”Ÿæˆç³»ç»Ÿï¼Œè‡ªåŠ¨ä» PDF è®ºæ–‡ä¸­æå–æ•°æ®å¹¶ç”Ÿæˆä¸“ä¸šçš„å¯è§†åŒ–å›¾è¡¨ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ“„ **PDF æ™ºèƒ½è§£æ**ï¼šè‡ªåŠ¨æå–è®ºæ–‡ä¸­çš„è¡¨æ ¼å’Œå…³é”®ä¿¡æ¯
- ğŸ¤– **ä¸‰é˜¶æ®µ Agent æ¡†æ¶**ï¼š
  - **é£æ ¼æ§åˆ¶ Agent**ï¼šåˆ†æç”¨æˆ·åå¥½å’Œå‚è€ƒå›¾ç‰‡ï¼Œæå–é£æ ¼çº¦æŸ
  - **è¡¨æ ¼ç±»å‹ Agent**ï¼šä¸ºæ¯ä¸ªè¡¨æ ¼æ¨èæœ€åˆé€‚çš„å›¾è¡¨ç±»å‹
  - **ç»˜å›¾ Agent**ï¼šç”Ÿæˆç¬¦åˆé£æ ¼çº¦æŸçš„ ECharts é…ç½®
- ğŸ“Š **ECharts æ¸²æŸ“**ï¼šä¸“ä¸šçš„ç§‘ç ”çº§å›¾è¡¨å¯è§†åŒ–
- ğŸ¨ **å¤šæ¨¡æ€è¾“å…¥**ï¼šæ”¯æŒæ–‡æœ¬æè¿° + å‚è€ƒå›¾ç‰‡
- ğŸ’¬ **è‡ªç„¶è¯­è¨€äº¤äº’**ï¼šé€šè¿‡å¯¹è¯æè¿°å›¾è¡¨éœ€æ±‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js 18+
- npm æˆ– yarn

### å®‰è£…æ­¥éª¤

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/ayuan324/ResearchChart.git
cd ResearchChart/app_demo

# 2. å®‰è£…ä¾èµ–
npm install

# 3. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env.local
```

ç¼–è¾‘ `.env.local` æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹é…ç½®ï¼š

```env
# ç™¾ç‚¼å¹³å° API Keyï¼ˆç”¨äº LLM è°ƒç”¨ï¼‰
DASHSCOPE_API_KEY=your_dashscope_key

# LlamaParse API Keyï¼ˆç”¨äº PDF è§£æï¼‰
LLAMAPARSE_API_KEY=your_llamaparse_key

# å¯é€‰ï¼šè‡ªå®šä¹‰æ¨¡å‹é…ç½®
OPENAI_COMPAT_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1
OPENAI_COMPAT_MODEL=qwen-max
```

### å¯åŠ¨æœåŠ¡

```bash
npm run dev
```

è®¿é—® http://localhost:3000/home.html

## ğŸ“– ä½¿ç”¨æŒ‡å—

### åŸºæœ¬æµç¨‹

1. **ä¸Šä¼ è®ºæ–‡** (`/upload.html`)
   - ä¸Šä¼  PDF æ–‡ä»¶
   - ç³»ç»Ÿè‡ªåŠ¨è§£æå¹¶æå–è¡¨æ ¼

2. **æŸ¥çœ‹åˆ†æ** (`/analysis.html`)
   - æŸ¥çœ‹æå–çš„è¡¨æ ¼å’Œç»“è®º
   - åœ¨å¯¹è¯æ¡†ä¸­æè¿°å›¾è¡¨éœ€æ±‚ï¼ˆå¯é€‰ï¼‰
   - ä¸Šä¼ å‚è€ƒå›¾ç‰‡æŒ‡å®šé£æ ¼ï¼ˆå¯é€‰ï¼‰

3. **ç”Ÿæˆå›¾è¡¨**
   - ç‚¹å‡» "Generate Charts"
   - ç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨ä¸‰é˜¶æ®µ Agent

4. **æŸ¥çœ‹ç»“æœ** (`/result.html`)
   - æµè§ˆç”Ÿæˆçš„ä¸“ä¸šå›¾è¡¨
   - æ”¯æŒå¯¼å‡ºå’Œåˆ†äº«

### é«˜çº§åŠŸèƒ½

#### é£æ ¼æ§åˆ¶
åœ¨å¯¹è¯æ¡†ä¸­æè¿°ä½ çš„åå¥½ï¼š
- "ä½¿ç”¨å­¦æœ¯é£æ ¼ï¼Œè“è‰²ç³»é…è‰²"
- "ç”Ÿæˆç®€æ´çš„æŸ±çŠ¶å›¾"
- "å‚è€ƒè®ºæ–‡ä¸­çš„å›¾è¡¨é£æ ¼"

#### å‚è€ƒå›¾ç‰‡
ç‚¹å‡»å›¾ç‰‡ä¸Šä¼ æŒ‰é’®ï¼Œä¸Šä¼ å‚è€ƒå›¾ç‰‡ï¼Œç³»ç»Ÿå°†ä½¿ç”¨å¤šæ¨¡æ€æ¨¡å‹åˆ†æå›¾ç‰‡é£æ ¼ã€‚

## ğŸ—ï¸ æŠ€æœ¯æ ˆ

- **å‰ç«¯**ï¼šNext.js 14, Tailwind CSS, ECharts
- **åç«¯**ï¼šNext.js API Routes
- **AI æ¨¡å‹**ï¼š
  - æ–‡æœ¬æ¨¡å‹ï¼šqwen-maxï¼ˆç™¾ç‚¼å¹³å°ï¼‰
  - å¤šæ¨¡æ€æ¨¡å‹ï¼šqwen-vl-plusï¼ˆç™¾ç‚¼å¹³å°ï¼‰
- **PDF è§£æ**ï¼šLlamaParse

## ğŸ¯ ä¸‰é˜¶æ®µ Agent æ¶æ„

### 1. é£æ ¼æ§åˆ¶ Agent (`/api/style-agent`)

**è¾“å…¥**ï¼š
- ç”¨æˆ·æ–‡æœ¬åå¥½ï¼ˆå¯é€‰ï¼‰
- å‚è€ƒå›¾ç‰‡ Base64ï¼ˆå¯é€‰ï¼‰

**è¾“å‡º**ï¼š
```json
{
  "style": "academic|simple|colorful|professional",
  "chart_types": ["bar", "line"],
  "color_scheme": {
    "primary": "#3b82f6",
    "secondary": "#8b5cf6",
    "palette": "cool"
  },
  "font_preferences": {
    "family": "Arial",
    "size": 12
  }
}
```

### 2. è¡¨æ ¼ç±»å‹ Agentï¼ˆé›†æˆåœ¨ `/api/charts`ï¼‰

**è¾“å…¥**ï¼š
- è¡¨æ ¼æ•°æ®ï¼ˆheaders, rows, conclusionsï¼‰

**è¾“å‡º**ï¼š
```json
{
  "recommended_type": "bar",
  "alternative_types": ["line", "scatter"],
  "reasoning": "æ•°æ®åŒ…å«åˆ†ç±»æ¯”è¾ƒï¼Œé€‚åˆæŸ±çŠ¶å›¾",
  "data_characteristics": {
    "has_categories": true,
    "has_numerical_values": true,
    "has_time_series": false
  }
}
```

### 3. ç»˜å›¾ Agentï¼ˆé›†æˆåœ¨ `/api/charts`ï¼‰

**è¾“å…¥**ï¼š
- è¡¨æ ¼æ•°æ®
- é£æ ¼çº¦æŸ
- å›¾è¡¨ç±»å‹æ¨è

**è¾“å‡º**ï¼š
```json
{
  "engine": "echarts",
  "per_table_specs": [{
    "table_index": 1,
    "title": "æ€§èƒ½å¯¹æ¯”",
    "spec": {
      "xAxis": {...},
      "yAxis": {...},
      "series": [...]
    }
  }]
}
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
app_demo/
â”œâ”€â”€ app/api/
â”‚   â”œâ”€â”€ charts/[taskId]/route.ts  # å›¾è¡¨ç”Ÿæˆä¸»æµç¨‹ï¼ˆé›†æˆè¡¨æ ¼ç±»å‹å’Œç»˜å›¾Agentï¼‰
â”‚   â”œâ”€â”€ ingest/route.ts           # PDF è§£æ
â”‚   â””â”€â”€ style-agent/route.ts      # é£æ ¼æ§åˆ¶Agent
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ prompts.ts                # Agent Prompt æ¨¡æ¿
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ home.html                 # ä¸»é¡µ
â”‚   â”œâ”€â”€ upload.html               # ä¸Šä¼ é¡µ
â”‚   â”œâ”€â”€ analysis.html             # åˆ†æé¡µï¼ˆé›†æˆé£æ ¼è¾“å…¥ï¼‰
â”‚   â””â”€â”€ result.html               # ç»“æœé¡µ
â””â”€â”€ docs/                         # è¯¦ç»†æ–‡æ¡£
    â””â”€â”€ é¡¹ç›®æ¶æ„.md
```

## ğŸ”§ API æ–‡æ¡£

è¯¦ç»†çš„ API æ–‡æ¡£è¯·å‚è€ƒ [docs/é¡¹ç›®æ¶æ„.md](./docs/é¡¹ç›®æ¶æ„.md)

## ğŸ› æ•…éšœæ’é™¤

### ECharts æœªåŠ è½½
- æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰ CDN åŠ è½½é”™è¯¯
- ç³»ç»Ÿä¼šè‡ªåŠ¨å°è¯•å¤‡ç”¨ CDN

### å›¾è¡¨æœªæ˜¾ç¤º
- æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—
- æ£€æŸ¥è¡¨æ ¼æ•°æ®æ˜¯å¦åŒ…å«æœ‰æ•ˆçš„æ•°å€¼

### API è°ƒç”¨å¤±è´¥
- ç¡®è®¤ `.env.local` ä¸­çš„ API Key é…ç½®æ­£ç¡®
- æ£€æŸ¥ç½‘ç»œè¿æ¥

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

è´¡çŒ®å‰è¯·é˜…è¯»ï¼š
1. éµå¾ªç°æœ‰ä»£ç é£æ ¼
2. æ·»åŠ é€‚å½“çš„æ³¨é‡Šå’Œæ–‡æ¡£
3. æµ‹è¯•ä½ çš„ä¿®æ”¹

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ“§ è”ç³»æ–¹å¼

- GitHub: [@ayuan324](https://github.com/ayuan324)
- é¡¹ç›®åœ°å€: https://github.com/ayuan324/ResearchChart

---

**æç¤º**ï¼šé¦–æ¬¡ä½¿ç”¨è¯·ç¡®ä¿é…ç½®ç¯å¢ƒå˜é‡ï¼Œè¯¦è§ [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹) ç« èŠ‚ã€‚
